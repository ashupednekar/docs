## Birds Eye View

Before we get into the database schema and code, let's get a quick birds eye view of user interaction with amigo-auth

![alt:basic_auth](https://bot.lebara.sa/images/generic/files/basic-auth.png)

When a user attempts to perform an action deemed as a secured action (e.g. checking account statement in chatbanking), the client service, "bot" in the above example calls the check token validity endpoint to find out the current status of the user.

- If a token doesn't exist, the user us prompted to register afresh

- If a token exists, but it's past it's expiry date, user is prompted to login

- If it's valid, token is further extended and user is allowed to proceed

## Secure Chatbanking journey

### What does a secure WhatsApp banking customer journey look like?

WhatsApp banking is replacing erstwhile USSD based mobile banking and Mobile apps due to additional security and convenience. Hereâ€™s a comprehensive list of security features we implemented at our partner banks to ensure their customers get the most secure user experience.

#### For Existing customers

1. **Registration with progressive profiling or MFA** - A customer can only register with their Registered mobile number after a secondary verification from either a digital channel API or verification of personal information

2. **Chat Banking credentials** - When the customers register they can create their own id and PIN, which will serve as the second factor of authentication for subsequent sessions. This ID is created outside of WhatsApp to prevent leaving traces in the chat history. The chat banking id and pin are not revealed anywhere in the conversations.

3. **Secure Session Management** - A user session is created every time a customer logs in and this session is valid for a predefined period of activity or till the time the customer explicitly logs out of the session.

![Digital onboarding options](https://www.bankbuddy.ai/img/posts_img/digital-onboarding-options.png)

4. **KYC levels** - There are KYC levels defined for customers to impose transaction and amount limits for risk management and compliance purposes. The limits can be set for individual transactions or aggregate transactions.

5. **Secure 2-factor authentication** is done via OTP for all financial transactions like bill payments and transfers, this also ensures that the system cannot be compromised on a session on WhatsApp web.

6. **Data protection** - All sensitive data displayed in WhatsApp is masked, PDF receipts are auto-generated for confirmations of all financial transactions. The platform allows you to secure PDF receipts and statements on your phone using passwords. So even if the customer loses their phone, their financial information is secure.

#### For New to bank (NTB) Customers

Secure Onboarding - It just takes a minute to open a wallet irrespective of whether you hold an account with the bank or not.

Regular accounts like CASA, Joint accounts, SME accounts can be opened instantaneously and securely from WhatsApp and other channels with a variety of options like Debit freeze, NID check, Face match, Liveness detection, and branch/agent for second level authentication.

Safer than cash - if you need to lend or give someone money, you can transfer money to their mobile even though they do not have a wallet. All they need to do is register themselves with the special link sent to them over SMS, and use that money safely. You can also have proof of giving money!

![Digital onboarding options](https://www.bankbuddy.ai/img/posts_img/digital-onboarding-options.png)

Customers can start using your wallet with someone funding their wallet - with KYC (national id and address proof), you can have your full-fledged Digital Banking Wallet as good as having a banking account.

![screenshot](https://i.ibb.co/4J3Hcfb/Screenshot-2021-07-14-at-12-08-17-PM.png)